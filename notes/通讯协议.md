---
title: 通讯协议
tags: [Misc]
---

# 通讯协议

从更专业的角度看，`长度+body` 确实有天生缺陷，就算限制缓冲区长度 4k，假设有 100W 并发， 那么只要每个连接只发 4k-1 长度，最后一个字节都不发送，那不算收到完整消息，服务端就得保持缓存 100W * (4K - 1) 的数据，接近 400G，可以瞬间把服务器打爆掉。面对客户端前端使用这种协议不科学。
